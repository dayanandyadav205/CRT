<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/style.css">
  <script src="/script.js"></script>

</head>

<body>
  <div id="header"></div>
  <br>
  <div class="todoContainer">


    <h1>To List Application (Updated)</h1><br>

    <input type="text" placeholder="Enter an Item" id="inputItem">
    <button onclick="addItem()" class="btnaddItem">Add Item</button><br><br>

    <h4>Item List</h4><br>
    <ol id="toDoList">
      <!-- items will be added at run time -->
    </ol>
  </div>
  <br><br><br><br><br><br>

  <script>
    //To Do List Application
    let items = JSON.parse(localStorage.getItem("items")) || [];

    function saveItems() {
      localStorage.setItem("items", JSON.stringify(items));
    }

    function addItem() {
      let input = document.getElementById("inputItem").value;
      document.getElementById("inputItem").value = "";

      if (input === "") {
        alert("Please enter an item");
      } else {
        items.push(input);
      }
      saveItems()
      renderItems();
    }

    function deleteItem(index) {
      items.splice(index, 1);
      saveItems()
      renderItems();
    }

    function editItem(index) {
      let newValue = prompt("Edit Item:", items[index]);
      if (newValue !== '' && newValue !== null) {
        items[index] = newValue;
      }
      saveItems()
      renderItems();
    }

    function renderItems() {
      let itemList = document.getElementById("toDoList");
      document.getElementById("toDoList").innerHTML = "";

      items.forEach((items, index) => {
        let li = document.createElement('li');
        li.textContent = items;
        itemList.appendChild(li);

        let deleteBtn = document.createElement('button');
        deleteBtn.textContent = 'X';
        li.appendChild(deleteBtn);
        deleteBtn.addEventListener('click', () => deleteItem(index));

        let editBtn = document.createElement('button');
        editBtn.textContent = 'Edit';
        li.appendChild(editBtn);
        editBtn.addEventListener('click', () => editItem(index));
      });
    }
    renderItems();
  </script>

  <div id="footer"></div>
</body>

</html>