<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .clsDeleteBtn {
      background-color: grey;
      margin-left: 10px;
    }

    .clsDeleteBtn:hover {
      background-color: rgb(213, 11, 11);
      color: white;
    }

    ol {
      line-height: 30px;
    }
  </style>
</head>

<body>
  <h1>To List Application (Updated)</h1>

  <input type="text" placeholder="Enter an Item" id="inputItem">
  <button onclick="addItem()">Add Item</button>

  <h4>Item List</h4>
  <ol id="toDoList">
    <!-- items will be added at run time -->
  </ol>

  <script>
    let items = JSON.parse(localStorage.getItem("items")) || [];

    function saveItem() {
      localStorage.setItem("items", JSON.stringify(items));
    }

    function addItem() {
      let input = document.getElementById("inputItem").value;
      document.getElementById("inputItem").value = "";

      if (input === "") {
        alert("Please enter an item");
      } else {
        items.push(input);
      }
      // console.log(input);
      saveItem();
      renderItems();
    }

    function deleteItem(index) {
      items.splice(index, 1);
      saveItem();
      renderItems();
    }

    function editItem(index) {
      let newValue = prompt("Edit Item:", items[index]);
      if (newValue !== "" && newValue !== null) {
        items[index] = newValue;
      }
      saveItem();
      renderItems();
    }

    function renderItems() {
      let itemList = document.getElementById("toDoList");
      document.getElementById("toDoList").innerHTML = "";

      items.forEach((items, index) => {
        let li = document.createElement('li');
        li.textContent = items;
        itemList.appendChild(li);
        console.log(itemList);

        let deleteBtn = document.createElement('button');

        deleteBtn.textContent = 'X';
        li.appendChild(deleteBtn);
        deleteBtn.addEventListener('click', () => deleteItem(index));
        // console.log(items)

        let editBtn = document.createElement('button');
        editBtn.textContent = 'Edit';
        li.appendChild(editBtn);
        // console.log(li);
        editBtn.addEventListener('click', () => editItem(index));
      });
    }

    renderItems();
  </script>
</body>

</html>